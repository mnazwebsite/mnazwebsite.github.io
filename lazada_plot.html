<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pivot Table Example</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        table {
            border-collapse: collapse;
            margin: 1em;
        }

        th, td {
            border: 1px solid black;
            padding: 0.5em;
            text-align: left;
        }
    </style>
</head>
<body>
    <div id="table-container"></div>
    <script>
        d3.csv("https://www.mnazwebsite.xyz/lazada_data.csv", d3.autoType).then(function(data) {
            var table = d3.select("#table-container").append("table");
            var thead = table.append("thead");
            var tbody = table.append("tbody");

            // Extract unique values for rows and columns
            var rowKeys = d3.set(data, function(d) { return d.Country; }).values();
            var colKeys = d3.set(data, function(d) { return d.Category; }).values();

            // Create the first row with column headers
            var firstRow = thead.append("tr");
            firstRow.append("th").text("Country");
            colKeys.forEach(function(colKey) {
                firstRow.append("th").text(colKey);
            });

            // Create the remaining rows with row headers
            rowKeys.forEach(function(rowKey) {
                var row = tbody.append("tr");
                row.append("td").text(rowKey);
                colKeys.forEach(function(colKey) {
                    var value = d3.sum(data, function(d) {
                        return (d.Country === rowKey && d.Category === colKey) ? d.Sales : 0;
                    });
                    row.append("td").text(value);
                });
            });
        }).catch(function(error) {
            console.log(error);
        });
    </script>
</body>
</html>
